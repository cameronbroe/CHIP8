//
// Created by cameron on 9/2/2019.
//

// Documentation on CHIP-8 from
// http://devernay.free.fr/hacks/chip8/C8TECH10.HTM

#include "chip8.h"

#define FONTSET_SIZE 80
#define FONTSET_START_ADDRESS 0x50

chip8_registers registers;
uint8_t memory[4096];

uint8_t fontset[FONTSET_SIZE] = {
        0xF0, 0x90, 0x90, 0x90, 0xF0, // 0
        0x20, 0x60, 0x20, 0x20, 0x70, // 1
        0xF0, 0x10, 0xF0, 0x80, 0xF0, // 2
        0xF0, 0x10, 0xF0, 0x10, 0xF0, // 3
        0x90, 0x90, 0xF0, 0x10, 0x10, // 4
        0xF0, 0x80, 0xF0, 0x10, 0xF0, // 5
        0xF0, 0x80, 0xF0, 0x90, 0xF0, // 6
        0xF0, 0x10, 0x20, 0x40, 0x40, // 7
        0xF0, 0x90, 0xF0, 0x90, 0xF0, // 8
        0xF0, 0x90, 0xF0, 0x10, 0xF0, // 9
        0xF0, 0x90, 0xF0, 0x90, 0x90, // A
        0xE0, 0x90, 0xE0, 0x90, 0xE0, // B
        0xF0, 0x80, 0x80, 0x80, 0xF0, // C
        0xE0, 0x90, 0x90, 0x90, 0xE0, // D
        0xF0, 0x80, 0xF0, 0x80, 0xF0, // E
        0xF0, 0x80, 0xF0, 0x80, 0x80  // F
};

void initialize_font() {
    memcpy(memory + FONTSET_START_ADDRESS, fontset, FONTSET_SIZE);
}

void process_cycle() {
    uint8_t x, y, n;
    uint16_t addr;

    unsigned short opcode = memory[registers.program_counter] << 8 | memory[registers.program_counter + 1];
    x = (opcode >> 8) & 0x000F; // Lowest 4 bits of upper byte
    y = (opcode >> 4) & 0x000F; // Highest 4 bits of lowest byte
}